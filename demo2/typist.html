<!doctype html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8" />
	<title>计时器应用 - 经典打字效果</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
	<meta name="format-detection" content="telephone=no,email=no,adress=no" />
	<style>
		body{ font-size:12px; }
		.demo{
			background-color:#f1f1f1;
			border:1px solid #ccc;
			border-radius:.4em;
			box-shadow:0 0 0 1px #fff inset;
			color:#333;
			font-size:2em;
			height:80px;
			line-height:80px;
			margin:20px 0;
			text-align:center;
			text-shadow:1px 1px 0 #fff;
			-webkit-transition:.4s;
			-moz-transition:.4s;
			transition:.4s;
			width:140px;
		}
		.demo:hover{
			background-color:#fffff1;
			width:340px;
		}
	</style>
</head>
<body>
	
	<h3>计时器应用 - 经典打字效果</h3>
	<p>请打开控制台检查代码</p>
	
	<div id="demo" class="demo" data-message="这是一个测试效果...">鼠标放这</div><!-- end demo -->
	
	<script src="../source/jquery-2.1.4.min.js"></script>
	<script src="../jquery-timer-2.0.0-min.js"></script>
	<script>
	
	//委派元素的鼠标穿透和离开事件.
	$("#demo").on({
		mouseenter: function() {
			var $that = $(this),  //jQuery 元素缓存当前对象.
				text = $that.text(),  //缓存当前显示文本.
				message = $that.text("").data("message");  //清空元素内容，并获取目标提示文字.
			
			//把当前文字保存起来.
			$(this).data("text", text);
			
			//设置计时器 回调函数、回调间隔（150ms）、回调次数（为目标文本长度）.
			$that.timer(function(i) {
				//动态截取文本信息实时写入元素，展示在页面上.
				$that.text( message.substring(0, i) );
			}, 0.1, message.length + 1);
		},
		mouseleave: function() {
			//停止计时器，并且还原显示文本.
			$(this).timer(true).text( $(this).data("text") ).data("text", "");
		}
	});
		
	</script>
	
</body>
</html>